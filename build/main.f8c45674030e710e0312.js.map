{"version":3,"sources":["webpack:///./templates/cardItem.hbs","webpack:///./js/references/refs.js","webpack:///./js/components/lightBox.js","webpack:///./js/components/notifications.js","webpack:///./index.js","webpack:///./js/api/apiService.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","searchForm","document","getElementById","gallery","querySelector","observerItem","loader","scrollElem","instance","window","addEventListener","event","code","console","log","currentTarget","close","onError","error","type","title","text","stack","myStack","hide","sticker","mode","shadow","width","mouseReset","maxTextHeight","styling","icons","closer","onFetchError","notice","defaultModules","set","PNotifyMobile","swipeDismiss","Stack","dir1","dir2","delay","firstpos1","firstpos2","closerHover","types","duration","dismissible","apiService","this","searchQuery","page","perPage","fetchPhotos","fetch","BASE_URL","response","ok","json","then","hits","incrementPage","catch","warn","resetPage","newQuery","refs","observer","IntersectionObserver","entries","forEach","entry","isIntersecting","renderImages","hideLoader","options","rootMargin","threshold","images","length","markup","cardItem","insertAdjacentHTML","observe","classList","add","preventDefault","innerHTML","unobserve","remove","inputValue","elements","query","value","RegExp","test","target","nodeName","basicLightbox","dataset","lightboxImg","show","pageYOffset","style","opacity","scrollTo","removeEventListener"],"mappings":"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","file":"main.f8c45674030e710e0312.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"item-card\\\">\\n\\n    <div class=\\\"photo-card\\\" style=\\\"background-image: url('https://i.imgur.com/NI2NcSe.gif')\\\">\\n        <img \\n        class=\\\"lightbox__image\\\" \\n        src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":13},\"end\":{\"line\":7,\"column\":29}}}) : helper)))\n    + \"\\\" \\n        id=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":12},\"end\":{\"line\":8,\"column\":18}}}) : helper)))\n    + \"\\\" \\n        data-lightbox-img=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":27},\"end\":{\"line\":9,\"column\":44}}}) : helper)))\n    + \"\\\" \\n        alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":10,\"column\":13},\"end\":{\"line\":10,\"column\":21}}}) : helper)))\n    + \"\\\"\\n        >\\n\\n        <div class=\\\"stats\\\">\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":16,\"column\":16},\"end\":{\"line\":16,\"column\":25}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">visibility</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":20,\"column\":16},\"end\":{\"line\":20,\"column\":25}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">comment</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":24,\"column\":16},\"end\":{\"line\":24,\"column\":28}}}) : helper)))\n    + \"\\n            </p>\\n            <p class=\\\"stats-item\\\">\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":28,\"column\":16},\"end\":{\"line\":28,\"column\":29}}}) : helper)))\n    + \"\\n            </p>\\n        </div>\\n    </div>\\n</li>\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":33,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","export default {\n  searchForm: document.getElementById('search-form'),\n  gallery: document.querySelector('.gallery-js'),\n  observerItem: document.querySelector('.observer-item'),\n  loader: document.getElementById('loader'),\n  scrollElem: document.getElementById('scrollToTop'),\n}\n\n","import * as basicLightbox from 'basiclightbox'\nimport '../../../node_modules/basiclightbox/dist/basicLightbox.min.css'\n\nlet instance = null;\n\nexport default function openLightBox({ target }) {\n  if (target.nodeName === 'IMG') {\n    instance = basicLightbox.create(\n      `<div class=\"lightbox-wrapper is-open\" style=\"background-image: url('https://i.imgur.com/NI2NcSe.gif')\">\n        <img src=\"${target.dataset.lightboxImg}\" width=\"800\" height=\"600\">\n      </div>`\n    );\n    instance.show();\n  }\n  return;\n}\n// Закрыть lightbox клавишей ESC\nwindow.addEventListener('keydown', (event) => {\n  if (event.code === 'Escape') {\n    console.log(event.currentTarget);\n    instance.close();\n  }\n  return;\n})\n\n\n // HW-08 GALLERY\n// import galleryItems from \"./references/gallery.js\";\n// const refs = {\n//   list: document.querySelector('.js-gallery'),\n//   container: document.querySelector('.js-lightbox'),\n//   image: document.querySelector('.lightbox__image'),\n//   closeBtn: document.querySelector('[data-action=\"close-lightbox\"]'),\n//   overlay: document.querySelector('.lightbox__overlay'),\n// };\n// const { list, container, image, closeBtn, overlay } = refs;\n\n// const createGalleryCard = items => {               // Создание и рендеринг разметки для строки\n//   return list.insertAdjacentHTML(\n//     'beforeend',\n//     items.map(({ preview, original, description }, index) => {\n//       return `\n//       <li class=\"gallery__item\">\n//         <a\n//           class=\"gallery__link\"\n//           href=\"${original}\"\n//         >\n//           <img\n//             class=\"gallery__image\"\n//             src=\"${preview}\"\n//             data-source=\"${original}\"\n//             alt=\"${description}\"\n//             data-index=\"${index}\"\n//           />\n//         </a>\n//       </li>`;\n//     })\n//       .join('')\n//   );\n// };\n// const markup = createGalleryCard(galleryItems, galleryItems.length);  \n\n// const itemGalleryEscHandler = ({ key }) => {                      // - Закрытие модального окна по нажатию клавиши `ESC`.\n//   if (key === 'Escape') {\n//     itemGalleryCloseHandler();    \n//   };\n// };\n\n// const scrollGalleryHandler = ({ key }) => {   \n//   let currentIndex = galleryItems.findIndex(\n//     item => item.description === image.alt || item.original === image.src\n//   );\n//   if (key === \"ArrowLeft\") {                // - Пролистывание изображений галереи в открытом модальном окне стрелками \"влево\".\n//     if (currentIndex !== 0) {\n//       currentIndex -= 1;\n//     } else {\n//       currentIndex = 0;\n//     };\n//   };\n//   if (key === \"ArrowRight\") {                // - Пролистывание изображений галереи в открытом модальном окне стрелками \"вправо\".\n//     if (currentIndex !== galleryItems.length - 1) {\n//       currentIndex += 1;\n//     } else {\n//       currentIndex = galleryItems.length - 1;\n//     };\n//   }; \n  \n//   image.alt = galleryItems[currentIndex].description;\n//   image.src = galleryItems[currentIndex].original;\n// };\n\n\n\n// // - Реализация делегирования на галерее `ul.js-gallery` и получение `url` большого изображения.\n// const itemGalleryOpenHandler = ({ target, currentTarget }) => {\n//   if (target.nodeName !== 'IMG') {\n//     return;\n//   };\n//   console.log(target);\n//   console.log(currentTarget);\n  \n//   event.preventDefault();\n//   window.addEventListener('keydown', itemGalleryEscHandler);  \n//   window.addEventListener('keydown', scrollGalleryHandler);\n\n//   container.classList.add('is-open');        // - Открытие модального окна по клику на элементе галереи.\n//   image.src = target.dataset.source;          // - Подмена значения атрибута `src` элемента `img.lightbox__image`.\n//   image.alt = target.alt;\n//   console.log(image.alt);\n// };\n\n\n\n// const itemGalleryCloseHandler = () => {\n//   window.removeEventListener('keydown', scrollGalleryHandler);\n  \n//   container.classList.remove('is-open');     // - Закрытие модального окна по клику на кнопку `button[data-action=\"close-lightbox\"]`.\n//   image.src = \"\";                         // - Очистка значения атрибута `src` элемента `img.lightbox__image`.\n//   image.alt = \"\";\n// };\n\n// list.addEventListener('click', itemGalleryOpenHandler);\n// closeBtn.addEventListener('click', itemGalleryCloseHandler);\n// overlay.addEventListener('click', itemGalleryCloseHandler);","import '@pnotify/core/dist/PNotify.css'\nimport '@pnotify/core/dist/Angeler.css'\nimport  '@pnotify/mobile/dist/PNotifyMobile.css'\nimport { notice, error, defaultModules, Stack, } from '@pnotify/core'\nimport * as PNotifyMobile from '@pnotify/mobile'\n\ndefaultModules.set(PNotifyMobile, { \n  swipeDismiss: true\n});\n\n\nfunction onError() {\n  error({\n    type: 'error',\n    title: 'Error!',\n    text: 'Something went wrong.Please try again later',\n    stack: myStack,\n    hide: true,\n    sticker: true,\n    mode: 'light',\n    shadow: true,\n    width: '100%',\n    mouseReset: true,\n    maxTextHeight: null,\n    styling: 'angeler',\n    icons: 'angeler',\n    closer: true,\n  });\n}\n\nfunction onFetchError(type) {\n  notice({\n    type: `${type}`,\n    title: 'Hey buddy!',\n    text: 'Please, check the entered value!',\n    stack: myStack,\n    hide: true,\n    sticker: true,\n    mode: 'light',\n    shadow: true,\n    width: '100%',\n    mouseReset: true,\n    maxTextHeight: null,\n    styling: 'angeler',\n    icons: 'angeler',\n});\n}\n\nconst myStack = new Stack({\n  dir1: 'down', \n  dir2: 'down',\n  delay: 900,\n  firstpos1: 25,\n  firstpos2: 25,\n  \n  closerHover: false,\n  types: [\n    {\n      type: 'error',\n      duration: 400,\n      dismissible: true,\n    },\n    {\n      type: 'notice',\n      dismissible: true,\n    },\n  ]\n});\n\nexport { onError, onFetchError }\n\n","import './main.scss'\nimport cardItem from './templates/cardItem.hbs'\nimport refs from './js/references/refs'\nimport openLightBox from './js/components/lightBox'\nimport { onError, onFetchError } from './js/components/notifications'\nimport PixabayApiService from './js/api/apiService'\n\nconst apiService = new PixabayApiService();\nconst { searchForm, gallery, observerItem, scrollElem, loader } = refs;\nconst observer = new IntersectionObserver(onObserveHandler, options);\n\nconst options = {\n  rootMargin: '100px',\n  threshold: 0.5,\n};\n\nsearchForm.addEventListener('submit', searchPhotoHandler);\ngallery.addEventListener('click', openLightBox);\n\nfunction searchPhotoHandler(event) {\n  event.preventDefault();\n  clearCardGallery();\n\n  showLoader();\n\n  const inputValue = event.currentTarget.elements.query.value;\n  console.log(inputValue);\n  const str = new RegExp('[a-zA-Z]');\n  if (!str.test(inputValue) || inputValue === '') {\n    hideLoader();\n    return onError(); \n  }\n\n  apiService.query = inputValue;\n  apiService.resetPage();\n\n  apiService\n  .fetchPhotos()\n  .then(renderImages)\n  .catch(onFetchError)\n}\n\nfunction renderImages(images) {\n  console.log(images.length === 0);\n\n  if (images.length === 0) {\n    hideLoader();\n    return onError();\n  }\n\n  const markup = cardItem(images);\n  gallery.insertAdjacentHTML('beforeend', markup);\n  observer.observe(observerItem);\n}\n\nfunction clearCardGallery() {\n  gallery.innerHTML = '';\n  observer.unobserve(observerItem);\n}\n\nfunction renderMoreImages() {\n  apiService\n  .fetchPhotos()\n  .then(renderImages)\n  .then(hideLoader)\n  .catch(onFetchError)\n}\n\nfunction onObserveHandler(entries) {  \n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      renderMoreImages();\n    }\n  });\n};\n\n\nfunction hideLoader() {\n  loader.classList.add('hide-loader');\n}\n\nfunction showLoader() {\n  loader.classList.remove('hide-loader');\n}\n\n// Безконечная прокрутка прокрутка\nwindow.addEventListener('scroll', function () {\n  if (pageYOffset > 100) {\n    scrollElem.style.opacity = '1';\n  } else {\n    scrollElem.style.opacity = '0';\n  }\n});\n\n// Кнопка возврат вверх сраницы\nscrollElem.addEventListener('click', upBtnHandler);\n\nfunction upBtnHandler() {\n  window.scrollTo(0, 0);\n  scrollElem.removeEventListener('click');\n}\n\n","import { BASE_URL } from '../references/baseUrl'\nimport { API_KEY } from '../references/apiKey'\n\nexport default class PixabayApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n    this.perPage = 12;\n  }\n  async fetchPhotos() {\n    const response = await fetch(\n      `${BASE_URL}\n      &q=${this.searchQuery}\n      &page=${this.page}\n      &per_page=${this.perPage}\n      &key=${API_KEY}`\n    );\n    if (!response.ok) {\n      throw response;\n    }\n\n    return response\n      .json()\n      .then(({ hits }) => {\n        this.incrementPage();\n        \n        return hits; \n      })\n      .catch(error => {\n        console.warn(error);\n      })\n  }\n  incrementPage() {\n    this.page += 1; \n  }\n  resetPage() {\n    this.page = 1;\n  }\n  get query() {\n    return this.searchQuery;\n  }\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n};\n\n\n/*\nconst API_KEY = '20659430-8e33c69d8b4c60137606db57c';\nconst BASE_URL = 'https://pixabay.com/api';\n\nexport default class ImagesApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async fetchImages() {\n    const url = `${BASE_URL}/?image_type=photo&orientation=horizontal&q=${this.searchQuery}&page=${this.page}&per_page=12&key=${API_KEY}`;\n\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw response;\n    }\n\n    return response\n      .json()\n      .then(({ hits }) => {\n        this.incrementPage();\n\n        return hits;\n      })\n      .catch(err => {\n        console.warn(err);\n      });\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n*/"],"sourceRoot":""}